{"version":3,"sources":["components.jsx"],"names":["Page","React","Component","showTip","clearQuery","history","replaceState","location","href","split","reloadPage","replace","render","ReactDOM","createElement","document","getElementById","HeaderTitle","divStyle","position","background","borderBottom","top","height","width","zIndex","h1Style","fontSize","fontFamily","margin","color","textShadow","cursor","imgStyle","props","icon","title","Overlay","left","pointerEvents","mode","children","LoginDialog","constructor","initialState","login","username","usernameConfirmed","email","emailConfirmed","password","password2","loggingIn","signupMessage","loginMessage","recoverySent","resetPassword","signupWarning","state","performLogin","bind","signUp","loginUsernameBox","resetPasswordBox","loginPasswordBox","passwordChange","submitForm","sendRecoveryLink","recover","checkUsernameAvailable","clear","setState","componentDidMount","refs","username_field","focus","self","api","result","success","message","password_valid","session","user","onLogin","reset_password","password_field","signupResult","check","signup","loginChange","e","target","value","usernameChange","prevState","emailChange","invalid","validPassword","warning","password2Change","test","invalidForm","validEmail","event","key","display","password_field2","loginSection","borderRadius","borderBottomLeftRadius","borderBottomRightRadius","alignItems","justifyContent","marginTop","alignSelf","padding","recoverSection","signupSection","flexDirection","onClickOut","input","usernameInput","passwordConfirmed","transition","opacity","backgroundColor","toggle","overflow","Button","hidden","flex","pressed","backgroundPressed","disabled","borderLeft","leftMost","borderRight","rightMost","borderTopLeftRadius","borderTopRightRadius","onClick","fontColor","text","ButtonBar","index","buttons","list","map","property","array","prop","length","LoginDialogHeader","Login","loginState","url","initialMode","open","close","canUpdateHistory","window","addEventListener","onUrlChange","loginDialog","pathname","componentDidUpdate","prevProps","pushState","right","Profile","view","logout","handleClickOutside","componentWillUnmount","removeEventListener","node","wrapper","parentNode","profile_pic","onLogout","minWidth","Tip","tip"],"mappings":"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","file":"components.js","sourcesContent":["class Page extends React.Component {\n    showTip() {}\n\n    static clearQuery() {\n        history.replaceState({}, 'Dobuki', location.href.split(\"?\")[0]);\n    }\n\n    static reloadPage() {\n        location.replace('');\n    }\n\n    static render() {\n        return ReactDOM.render(React.createElement(this, null), document.getElementById('root'));\n    }\n}\n\nclass HeaderTitle extends React.Component {\n    render() {\n        const divStyle = {\n            position: 'fixed',\n            background: 'linear-gradient(white, silver)',\n            borderBottom: '1px solid gray',\n            top: 0, height: 50, width: '100%', zIndex: 2,\n        };\n\n        const h1Style = {\n            fontSize: 32,\n            fontFamily: 'Fredoka One',\n            margin: 0,\n            color: '#012',\n            textShadow: '1px 1px 0 #FFF',\n            cursor: 'pointer',\n        };\n\n        const imgStyle = {\n            width: 50, height: 50,\n            cursor: 'pointer',\n        };\n\n        return (<div>\n            <div style={divStyle} className=\"header\">\n                <img style={imgStyle} src={this.props.icon} onClick={Page.reloadPage}/>\n                <h1 style={h1Style} onClick={Page.reloadPage}>{this.props.title}</h1>\n            </div>\n            <div style={{ height: 51 }}/>\n        </div>);\n    }\n}\n\nclass Overlay extends React.Component {\n    render() {\n        return <div style={{\n            position: 'absolute',\n            top: 51, left: 0,\n            width: '100%', height: '100%',\n            pointerEvents: this.props.mode ? '' : 'none',\n        }}>\n            { this.props.children }\n        </div>\n    }\n}\n\nclass LoginDialog extends React.Component {\n    constructor(props) {\n        super(props);\n        this.initialState = {\n            login: null,\n            username: null,\n            usernameConfirmed: false,\n            email: null,\n            emailConfirmed: false,\n            password: null,\n            password2: null,\n            loggingIn: false,\n            signupMessage: null,\n            loginMessage: null,\n            recoverySent: false,\n            resetPassword: false,\n            signupWarning: null,\n        };\n        this.state = this.initialState;\n        this.performLogin = this.performLogin.bind(this);\n        this.signUp = this.signUp.bind(this);\n        this.loginUsernameBox = this.loginUsernameBox.bind(this);\n        this.resetPasswordBox = this.resetPasswordBox.bind(this);\n        this.loginPasswordBox = this.loginPasswordBox.bind(this);\n        this.passwordChange = this.passwordChange.bind(this);\n        this.submitForm = this.submitForm.bind(this);\n        this.sendRecoveryLink = this.sendRecoveryLink.bind(this);\n        this.recover = this.recover.bind(this);\n        this.checkUsernameAvailable = this.checkUsernameAvailable.bind(this);\n    }\n\n    clear() {\n        this.setState(this.initialState);\n    }\n\n    componentDidMount() {\n        if(this.props.mode==='login' && this.refs.username_field) {\n            this.refs.username_field.focus();\n        }\n    }\n\n    sendRecoveryLink() {\n        const self = this;\n        if (!this.state.loggingIn) {\n            this.setState({\n                loggingIn: true,\n                loginMessage: null,\n            });\n            api.recover(this.state.login, function(result) {\n                if(result.success) {\n                    self.setState({\n                        loggingIn: false,\n                        loginMessage: result.message,\n                        recoverySent: true,\n                    });\n                } else {\n                    self.setState({\n                        loggingIn: false,\n                        loginMessage: result.message,\n                    });\n                }\n            });\n        }\n    }\n\n    performLogin() {\n        const self = this;\n        if (!this.state.loggingIn) {\n            this.setState({\n                loggingIn: true,\n                loginMessage: null,\n            });\n            api.login(this.state.login, this.state.password || '', function(result) {\n                if(result.success) {\n                    if(result.password_valid) {\n                        session.user = result.username;\n                        self.props.onLogin();\n                    } else {\n                        self.setState({\n                            login: result.username,\n                            username: result.username,\n                            usernameConfirmed: true,\n                            loggingIn: false,\n                            loginMessage: '',\n                            resetPassword: result.reset_password,\n                        }, function() {\n                            self.refs.password_field.focus();\n                        });\n                    }\n                } else {\n                    self.setState({\n                        loggingIn: false,\n                        loginMessage: result.message,\n                    });\n                }\n            });\n        }\n    }\n\n    signupResult(result) {\n        if (result.success) {\n            this.setState({\n                signupMessage: `\n                Thank you for signing up. Please check ${this.state.email}\n                for a confirmation email.\n            `,\n            });\n        } else {\n            this.setState({\n                loggingIn: false,\n                signupWarning: result.message,\n            });\n        }\n    }\n\n    recover() {\n        this.setState({\n            loginMessage: null,\n        }, function() {\n            this.props.recover();\n        }.bind(this));\n    }\n\n    checkUsernameAvailable(username) {\n        api.check(username, function(result) {\n            if(!result.success) {\n                this.setState({\n                    signupWarning: result.message,\n                });\n            }\n        }.bind(this));\n    }\n\n    signUp() {\n        if (!this.state.loggingIn) {\n            this.setState({\n                loggingIn: true,\n                signupMessage: null,\n            });\n            api.signup(\n                this.state.username,\n                this.state.email,\n                this.state.password,\n                this.signupResult.bind(this),\n            );\n        }\n    }\n\n    loginChange(e) {\n        this.setState({\n            login: e.target.value,\n        });\n    }\n\n    usernameChange(e) {\n        this.setState((prevState) => {\n            return {\n                signupWarning: null,\n                username: e.target.value,\n            }\n        });\n    }\n\n    emailChange(e) {\n        this.setState((prevState) => {\n            return {\n                signupWarning: null,\n                email: e.target.value,\n            };\n        });\n    }\n\n    passwordChange(e) {\n        const target = e.target;\n        this.setState((prevState) => {\n            const invalid = !LoginDialog.validPassword(target.value);\n            const warning = \"Your password must have at least eight characters, including one letter and one number.\";\n            const signupWarning = invalid\n                ? warning\n                : prevState.signupWarning && warning !== prevState.signupWarning\n                ? prevState.signupWarning\n                : null;\n            return {\n                signupWarning,\n                password: target.value,\n            };\n        });\n    }\n\n    password2Change(e) {\n        const target = e.target;\n        this.setState((prevState) => {\n            const invalid = prevState.password !== target.value;\n            const warning = \"The password you entered must match.\";\n            const signupWarning = invalid\n                ? warning\n                : prevState.signupWarning && warning !== prevState.signupWarning\n                ? prevState.signupWarning\n                : null;\n            return {\n                signupWarning,\n                password2: target.value,\n            };\n        });\n    }\n    \n    static validPassword(password) {\n        return /^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{8,}$/.test(password);\n    }\n\n    static invalidForm(state) {\n        return !state.username\n            || !this.validEmail(state.email)\n            || !this.constructor.validPassword(state.password)\n            || state.password2 !== state.password;\n    }\n\n    submitForm(event) {\n        if(event.key === 'Enter'){\n            this.performLogin();\n        }\n    }\n\n    loginPasswordBox() {\n        const fontFamily = \"'Concert One', cursive\";\n        return [\n            <div style={{ height: 20 }}/>,\n            <div style={{\n                    fontFamily,\n                    fontSize: 20,\n                    height: 40,\n                    display: this.state.usernameConfirmed ? '' : 'none',\n                }}\n                onClick={function() { this.setState({ usernameConfirmed: false }); }.bind(this)}\n            >{ this.state.username }</div>,\n            <input type=\"text\"\n               value={this.state.login} readonly autocomplete=\"off\"\n               style={{ display: 'none' }}\n            />,\n            <input ref=\"password_field\"\n                type=\"password\"\n                placeholder=\"Enter your password\"\n                className=\"input\"\n                onChange={this.passwordChange.bind(this)}\n                disabled={this.state.loggingIn}\n                value={this.state.password}\n                onKeyPress={this.submitForm}\n                style={{\n                    height: 40,\n                    width: '100%',\n                }}/>,\n            <div style={{ height: 20 }}/>,\n            <div style={{\n                display: 'flex',\n                height: 50,\n                width: '70%',\n            }}>\n                <Button\n                    text=\"login\"\n                    leftMost rightMost\n                    onClick={this.performLogin}\n                    fontSize=\"24\"\n                    fontColor=\"#eee\"\n                    background=\"linear-gradient(#59f79d, #2c6846)\"\n                    backgroundPressed=\"#a3e2bf\"\n                    pressed={this.state.loggingIn}\n                    disabled={!this.state.password}\n                />\n            </div>,\n        ];\n    }\n\n    loginUsernameBox() {\n        return [\n            <div style={{ height: 20 }}/>,\n            <input ref=\"username_field\"\n                type=\"text\"\n                placeholder=\"Enter your username or email\"\n                className=\"input\"\n                onChange={this.loginChange.bind(this)}\n                disabled={this.state.loggingIn}\n                value={this.state.login}\n                onKeyPress={this.submitForm}\n                style={{\n                    height: 40,\n                    width: '100%',\n                }}/>,\n            <div style={{ height: 20 }}/>,\n            <div style={{\n                display: 'flex',\n                height: 50,\n                width: '70%',\n            }}>\n                <Button text=\"next\"\n                    leftMost rightMost\n                    onClick={this.performLogin}\n                    fontSize=\"24\"\n                    fontColor=\"#eee\"\n                    background=\"linear-gradient(#59f79d, #2c6846)\"\n                    backgroundPressed=\"#a3e2bf\"\n                    pressed={this.state.loggingIn}\n                    disabled={!this.state.login}\n                />\n            </div>,\n        ];\n    }\n\n    resetPasswordBox() {\n        const fontFamily = \"'Concert One', cursive\";\n        return [\n            <div style={{ height: 20 }}/>,\n            <div style={{\n                fontFamily,\n                fontSize: 20,\n                height: 40,\n                display: this.state.usernameConfirmed ? '' : 'none',\n            }}\n                 onClick={(() => { this.setState({ usernameConfirmed: false }); }).bind(this)}\n            >{ this.state.username }</div>,\n            <input type=\"text\"\n                   value={this.state.login} readonly autocomplete=\"off\"\n                   style={{ display: 'none' }}\n            />,\n            <input ref=\"password_field\"\n                   type=\"password\"\n                   placeholder=\"Enter a new password\"\n                   className=\"input\"\n                   onChange={this.passwordChange.bind(this)}\n                   disabled={this.state.loggingIn}\n                   value={this.state.password}\n                   onKeyPress={(event) => {\n                       if(event.key === 'Enter'){\n                           this.refs.password_field2.focus();\n                       }\n                   }}\n                   style={{\n                       height: 40,\n                       width: '100%',\n                   }}/>,\n            <div style={{ height: 20 }}/>,\n            <input ref=\"password_field2\"\n                   type=\"password\"\n                   placeholder=\"Re-enter the same password\"\n                   className=\"input\"\n                   onChange={this.password2Change.bind(this)}\n                   disabled={this.state.loggingIn}\n                   value={this.state.password2}\n                   onKeyPress={function(event) {\n                       if(!this.constructor.invalidForm(this.state)) {\n                           this.submitForm(event);\n                       }\n                   }.bind(this)}\n                   style={{\n                       height: 40,\n                       width: '100%',\n                   }}/>,\n            <div style={{ height: 20 }}/>,\n            <div style={{\n                display: 'flex',\n                height: 50,\n                width: '70%',\n            }}>\n                <Button\n                    text=\"Change password\"\n                    leftMost rightMost\n                    onClick={this.performLogin}\n                    fontSize=\"24\"\n                    fontColor=\"#eee\"\n                    background=\"linear-gradient(#59f79d, #2c6846)\"\n                    backgroundPressed=\"#a3e2bf\"\n                    pressed={this.state.loggingIn}\n                    disabled={!this.state.password}\n                />\n            </div>,\n        ];\n    }\n\n    loginSection() {\n        const borderRadius = 8;\n        const fontFamily = \"'Concert One', cursive\";\n        return (<div style={{\n            width: '100%',\n            height: 'auto',\n            borderBottomLeftRadius: borderRadius,\n            borderBottomRightRadius: borderRadius,\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n        }}>\n            <div className=\"loginsection\">\n                {\n                    this.state.resetPassword\n                    ? this.resetPasswordBox()\n                    : this.state.usernameConfirmed\n                    ? this.loginPasswordBox()\n                    : this.loginUsernameBox()\n                }\n                <div style={{\n                    display: 'flex',\n                    marginTop: 20,\n                    alignItems: 'center', alignSelf: 'center', justifyContent: 'center',\n                    'width': 50, 'height': 50,\n                }}>\n                    <div className={\n                        `tux-loading-indicator ${this.state.loggingIn?'show':''}`\n                    }>\n                    </div>\n                </div>\n                { this.state.loginMessage &&  <div style={{\n                        fontFamily,\n                        fontSize: 20,\n                        padding: 20,\n                    }}>\n                        { this.state.loginMessage }\n                    </div>\n                }\n                { !this.state.loggingIn && !this.state.resetPassword &&\n                    <div><a className=\"link\" onClick={this.recover}>\n                        Did you forget your username or password?\n                    </a></div>\n                }\n            </div>\n        </div>);\n    }\n\n    recoverSection() {\n        const borderRadius = 8;\n        const fontFamily = \"'Concert One', cursive\";\n        return (<div style={{\n            width: '100%',\n            height: 'auto',\n            borderBottomLeftRadius: borderRadius,\n            borderBottomRightRadius: borderRadius,\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n        }}>\n            <div className=\"loginsection\">\n                <div style={{ height: 20 }}/>\n                <input ref=\"username_field\"\n                   type=\"email\"\n                   placeholder=\"Enter your email\"\n                   className=\"input\"\n                   onChange={this.loginChange.bind(this)}\n                   disabled={this.state.loggingIn || this.state.recoverySent}\n                   value={this.state.login}\n                   onKeyPress={this.submitForm}\n                   style={{\n                       height: 40,\n                       width: '100%',\n                   }}/>,\n                <div style={{ height: 20 }}/>\n                <div style={{\n                    display: 'flex',\n                    height: 50,\n                    width: '70%',\n                }}>\n                    <Button text=\"send recovery link\"\n                        leftMost rightMost\n                        onClick={this.sendRecoveryLink}\n                        fontSize=\"24\"\n                        fontColor=\"#eee\"\n                        background=\"linear-gradient(#59f79d, #2c6846)\"\n                        backgroundPressed=\"#a3e2bf\"\n                        pressed={this.state.loggingIn || this.state.recoverySent}\n                        disabled={!this.state.login || !LoginDialog.validEmail(this.state.login)}\n                    />\n                </div>\n                <div style={{\n                    display: 'flex',\n                    marginTop: 20,\n                    alignItems: 'center', alignSelf: 'center', justifyContent: 'center',\n                    'width': 50, 'height': 50,\n                }}>\n                    <div className={\n                        `tux-loading-indicator ${this.state.loggingIn?'show':''}`\n                    }>\n                    </div>\n                </div>\n                { this.state.loginMessage &&  <div style={{\n                    fontFamily,\n                    fontSize: 20,\n                    padding: 20,\n                }}>\n                    { this.state.loginMessage }\n                </div>\n                }\n            </div>\n        </div>);\n    }\n\n    static validEmail(email) {\n        return /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(email);\n    }\n\n    signupSection() {\n        const borderRadius = 8;\n        const fontFamily = \"'Concert One', cursive\";\n        return (this.state.signupMessage ?\n            <div style={{\n                display: 'flex',\n                flexDirection: 'column',\n                alignItems: 'center',\n                justifyContent: 'center',\n            }}>\n                <div style={{\n                    fontFamily,\n                    fontSize: 20,\n                    padding: 20,\n                }}>\n                    { this.state.signupMessage }\n                </div>\n                <div style={{\n                    display: 'flex',\n                    height: 50,\n                    width: '70%',\n                }}>\n                    <Button text=\"close\"\n                        leftMost rightMost\n                        onClick={this.props.onClickOut}\n                        fontSize=\"24\"\n                        fontColor=\"#eee\"\n                        background=\"linear-gradient(#59f79d, #2c6846)\"\n                        backgroundPressed=\"#a3e2bf\"\n                    />\n                </div>\n            </div> :\n            <div style={{\n            width: '100%',\n            height: 'auto',\n            borderBottomLeftRadius: borderRadius,\n            borderBottomRightRadius: borderRadius,\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n        }}>\n            <div className=\"loginsection\">\n                <div style={{ height: 20 }}/>\n                <input\n                    ref={(input) => { this.usernameInput = input; }}\n                    placeholder=\"Enter a username\"\n                    className=\"input\"\n                    onChange={this.usernameChange.bind(this)}\n                    onBlur={(() => { this.setState((prevState) => {\n                        this.checkUsernameAvailable(prevState.username);\n                        return { usernameConfirmed: prevState.username }});\n                    }).bind(this)}\n                    disabled={this.state.loggingIn}\n                    value={this.state.username}\n                    onKeyPress={(event) => {\n                        if(event.key === 'Enter'){\n                            this.refs.email.focus();\n                        }\n                    }}\n                    style={{\n                        height: 40,\n                        width: '100%',\n                        display: this.state.usernameConfirmed ? 'none' : '',\n                    }}/>\n                <div\n                    className=\"confirmed-input\"\n                    style={{\n                        display: this.state.usernameConfirmed ? '' : 'none',\n                    }}\n                     onClick={(() => {\n                         this.setState({ usernameConfirmed: false }, function() {\n                             this.usernameInput.focus();\n                         }.bind(this));\n                     }).bind(this)}\n                ><div><b>Username:</b> { this.state.username }</div></div>\n                <div style={{ height: 20 }}/>\n                <input ref=\"email\" type=\"email\"\n                    placeholder=\"Enter an email\"\n                    className=\"input\"\n                    onChange={this.emailChange.bind(this)}\n                    onBlur={(() => {this.setState((prevState) => {\n                        this.checkUsernameAvailable(prevState.email);\n                        return { emailConfirmed:\n                            this.constructor.validEmail(prevState.email) ? prevState.email : null\n                        }});\n                    }).bind(this)}\n                    disabled={this.state.loggingIn}\n                    value={this.state.email}\n                       onKeyPress={(event) => {\n                           if(event.key === 'Enter'){\n                               this.refs.password_field.focus();\n                           }\n                       }}\n                    style={{\n                        height: 40,\n                        width: '100%',\n                        display: this.state.emailConfirmed ? 'none' : '',\n                    }}/>\n                <div\n                    className=\"confirmed-input\"\n                    style={{\n                        display: this.state.emailConfirmed ? '' : 'none',\n                    }}\n                     onClick={(() => {\n                         this.setState({ emailConfirmed: false }, function() {\n                             this.usernameInput.focus();\n                         }.bind(this));\n                     }).bind(this)}\n                ><div><b>Email:</b> { this.state.email }</div></div>\n                <div style={{ height: 20 }}/>\n                <input ref=\"password_field\" type=\"password\"\n                    placeholder=\"Enter a password\"\n                    className=\"input\"\n                    onChange={this.passwordChange.bind(this)}\n                    onBlur={(() => { this.setState({ passwordConfirmed: true }); }).bind(this)}\n                    onFocus={(() => { this.setState({ passwordConfirmed: false }); }).bind(this)}\n                    disabled={this.state.loggingIn}\n                    value={this.state.password}\n                    onKeyPress={(event) => {\n                       if(event.key === 'Enter'){\n                           this.refs.password_field2.focus();\n                       }\n                    }}\n                    style={{\n                        height: 40,\n                        width: '100%',\n                        color: this.state.passwordConfirmed && this.state.password !== this.state.password2 ?\n                           'red' : 'black'\n                    }}/>\n                <div style={{ height: 20 }}/>\n                <input ref=\"password_field2\" type=\"password\"\n                       placeholder=\"Retype password\"\n                       className=\"input\"\n                       onChange={this.password2Change.bind(this)}\n                       disabled={this.state.loggingIn}\n                       value={this.state.password2}\n                       onKeyPress={((event) => {\n                           if(event.key === 'Enter'){\n                               this.signUp();\n                           }\n                       }).bind(this)}\n                       style={{\n                           height: 40,\n                           width: '100%',\n                       }}/>\n                {!this.state.loggingIn && [\n                    <div style={{ height: 20 }}/>,\n                    <div style={{\n                        display: 'flex',\n                        height: 50,\n                        width: '70%',\n                    }}>\n                        <Button\n                            text=\"sign up\"\n                            leftMost rightMost\n                            onClick={this.signUp}\n                            fontSize=\"24\"\n                            fontColor=\"#eee\"\n                            background=\"linear-gradient(#59f79d, #2c6846)\"\n                            backgroundPressed=\"#a3e2bf\"\n                            pressed={this.state.loggingIn}\n                            disabled={this.constructor.invalidForm(this.state)}\n                        >\n                            <i right/>\n                        </Button>\n                    </div>\n                ]}\n                { !this.state.loggingIn && this.state.signupWarning &&\n                    <div style={{\n                        color: '#D00',\n                        marginTop: 10,\n                    }}>{this.state.signupWarning}</div>\n                }\n                <div style={{\n                    display: 'flex',\n                    marginTop: 20,\n                    alignItems: 'center', alignSelf: 'center', justifyContent: 'center',\n                    'width': 50, 'height': 50,\n                }}>\n                    <div className={\n                        `tux-loading-indicator ${this.state.loggingIn?'show':''}`\n                    }>\n                    </div>\n                </div>\n            </div>\n        </div>);\n    }\n\n    render() {\n        const borderRadius = 8;\n        return (\n            <div>\n                <Overlay mode={this.props.mode}>\n                { this.props.mode &&\n                    <div className=\"overlay\">\n                        <div style={{\n                            position: 'fixed',\n                            top: 0, left: 0,\n                            width: '100%', height: 'calc(100% + 200px)',\n                            transition: 'opacity .2s linear',\n                            opacity: this.props.mode ? .8: 0,\n                            backgroundColor: '#002',\n                            cursor: 'pointer',\n                            display: this.props.mode ? '' : 'none',\n                        }} onClick={this.props.onClickOut}>\n                        </div>\n                        <div className=\"popdialog\">\n                            <LoginDialogHeader toggle={this.props.toggle} mode={this.props.mode}/>\n                            <div style={{ width: '100%', overflow: 'hidden' }}>\n                                { this.props.mode==='login' && this.loginSection() }\n                                { this.props.mode==='signup' && this.signupSection() }\n                                { this.props.mode==='recover' && this.recoverSection() }\n                            </div>\n                        </div>\n                    </div>\n                }\n                </Overlay>\n            </div>\n        );\n    }\n}\n\nclass Button extends React.Component {\n    render() {\n        const borderRadius = 8;\n        const fontFamily = \"'Concert One', cursive\";\n        return (!this.props.hidden && <div style={{\n            flex: 1,\n            transition: '.2s',\n            background: this.props.pressed\n                ? this.props.backgroundPressed || '#444466'\n                : this.props.disabled\n                ? 'linear-gradient(white, silver)'\n                : this.props.background || 'linear-gradient(white, gray)',\n            borderLeft: this.props.leftMost ? 0 : '1px solid gray',\n            borderRight: this.props.rightMost ? 0 : '1px solid gray',\n            borderTopLeftRadius: this.props.leftMost ? borderRadius : 0,\n            borderBottomLeftRadius: this.props.leftMost ? borderRadius : 0,\n            borderTopRightRadius: this.props.rightMost ? borderRadius : 0,\n            borderBottomRightRadius: this.props.rightMost ? borderRadius : 0,\n            fontFamily,\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            cursor: 'pointer',\n            pointerEvents: this.props.pressed ? 'none' : '',\n        }} onClick={this.props.disabled?null:this.props.onClick}>\n            <div style={{\n                fontSize: this.props.fontSize || 20,\n                color: this.props.pressed ? 'snow'\n                    : this.props.disabled ? 'silver'\n                    : this.props.fontColor || '#666677',\n            }}>\n                {this.props.text}\n            </div>\n        </div>);\n    }\n}\n\nclass ButtonBar extends React.Component {\n    constructor(props) {\n        super(props);\n        this.onClick = this.onClick.bind(this);\n    }\n\n    onClick(index) {\n        this.props.onClick(index);\n    }\n\n    render() {\n        const self = this;\n        const buttons = this.props.list.map((property, index, array) => {\n            const prop = typeof(property)==='string' ? { text:property } : property;\n            return (\n                <Button\n                    pressed={self.props.pressed===index}\n                    onClick={prop.onClick ? prop.onClick : () => { self.onClick(index); }}\n                    text={prop.text}\n                    leftMost={index===0}\n                    rightMost={index===array.length-1}\n                />\n            )\n        });\n        return (<div style={{\n            display: 'flex',\n            height: 50,\n            width: 'calc(100% - 100px)',\n        }}>\n            { buttons }\n        </div>);\n    }\n}\n\nclass LoginDialogHeader extends React.Component {\n    render() {\n        const borderRadius = 8;\n        const fontFamily = \"'Concert One', cursive\";\n        return <div style={{\n            width: '100%',\n            height: 100,\n            borderTopLeftRadius: borderRadius,\n            borderTopRightRadius: borderRadius,\n            background: 'linear-gradient(white, silver)',\n            borderBottom: '1px solid gray',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n        }}>\n            {this.props.mode === 'recover' ? <div style={{\n                fontFamily,\n                padding: 50,\n            }}>\n                Please enter your email. We will send you a link to reset your password.\n            </div>:\n            <ButtonBar list={[ 'login', 'signup' ]} onClick={this.props.toggle}\n               pressed={this.props.mode==='login' ? 0 : 1}\n            />}\n        </div>\n    }\n}\n\nclass Login extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            mode: this.constructor.loginState(props.url),\n            initialMode: this.constructor.loginState(props.url) || 'login',\n        };\n        this.open = this.open.bind(this);\n        this.close = this.close.bind(this);\n        this.toggle = this.toggle.bind(this);\n        this.recover = this.recover.bind(this);\n        this.onLogin = this.onLogin.bind(this);\n        this.canUpdateHistory = true;\n        window.addEventListener('popstate', this.onUrlChange.bind(this));\n    }\n\n    static loginState(url) {\n        switch(url) {\n            case '/login':\n                return 'login';\n            case '/signup':\n                return 'signup';\n            case '/recover':\n                return 'recover';\n        }\n        return '';\n    }\n\n    open(mode) {\n        this.setState({\n            mode: mode,\n        });\n    }\n\n    close() {\n        this.setState((prevState) => ({\n            initialMode: prevState.mode,\n            mode: null,\n        }));\n        this.refs.loginDialog.clear();\n    }\n\n    onLogin() {\n        this.close();\n        this.props.onLogin();\n    }\n\n    toggle() {\n        this.setState((prevState, props) => ({\n            mode: prevState.mode === 'login' ? 'signup' : 'login',\n        }));\n    }\n\n    recover() {\n        this.setState({\n            mode: 'recover',\n        })\n    }\n\n    onUrlChange() {\n        const mode = this.constructor.loginState(location.pathname);\n        if (mode !== this.state.mode) {\n            this.canUpdateHistory = false;\n            this.setState({ mode });\n        }\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        if (prevState.mode !== this.state.mode) {\n            if (!this.canUpdateHistory) {\n                this.canUpdateHistory = true;\n            } else {\n                history.pushState(\n                    {mode: this.state.mode},\n                    this.state.mode || 'Dobuki',\n                    `/${this.state.mode || ''}`\n                );\n            }\n        }\n    }\n\n    render() {\n        return (\n            <div>\n                <div style={{\n                    position: 'fixed',\n                    top: 0, right: 0,\n                    margin: '0 8px',\n                    display: 'flex',\n                    flexDirection: 'row',\n                    zIndex: 3,\n                }}>\n                    <div className=\"button\" onClick={(() => this.open('login')).bind(this)} style={{\n                        width: 50, height: 50,\n                        display: 'flex',\n                        flexDirection: 'column',\n                        alignItems: 'center',\n                    }}>\n                        <div style={{ fontFamily: \"'Concert One', cursive\" }}>login</div>\n                        <img style={{ width: 32, height: 32 }} src=\"/assets/login.svg\" />\n                    </div>\n                    <div className=\"button\" onClick={(() => this.open('signup')).bind(this)} style={{\n                        width: 50, height: 50,\n                        display: 'flex',\n                        flexDirection: 'column',\n                        alignItems: 'center',\n                    }}>\n                        <div style={{ fontFamily: \"'Concert One', cursive\" }}>signup</div>\n                        <img style={{ width: 28, height: 28 }} src=\"/assets/signup.svg\" />\n                    </div>\n                </div>\n                <LoginDialog ref=\"loginDialog\"\n                    mode={this.state.mode}\n                    onClickOut={this.close}\n                    toggle={this.toggle}\n                    recover={this.recover}\n                    onLogin={this.onLogin}\n                />\n            </div>\n        );\n    }\n}\n\nclass Profile extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            view: false,\n        };\n        this.open = this.open.bind(this);\n        this.close = this.close.bind(this);\n        this.logout = this.logout.bind(this);\n        this.handleClickOutside = this.handleClickOutside.bind(this);\n    }\n\n    componentDidMount() {\n        document.addEventListener('mousedown', this.handleClickOutside);\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener('mousedown', this.handleClickOutside);\n    }\n\n    handleClickOutside(event) {\n        let node = event.target;\n        while(node) {\n            if(node===this.refs.wrapper) {\n                return;\n            }\n            node = node.parentNode;\n        }\n        this.close();\n    }\n    profile_pic() {\n        return `/profile/${this.props.username}/image.png`;\n    }\n\n    open() {\n        this.setState((prevState) => ({\n            view: !prevState.view,\n        }));\n    }\n\n    close() {\n        this.setState({\n            view: false,\n        });\n    }\n\n    logout() {\n        close();\n        api.logout(function(result) {\n            session.user = null;\n            this.props.onLogout();\n        }.bind(this));\n    }\n\n    render() {\n        return (\n            <div ref=\"wrapper\">\n                <div className=\"button\" onClick={this.open} style={{\n                    position: 'fixed',\n                    top: 0, right: 0,\n                    padding: '0 8px',\n                    height: 50,\n                    display: 'flex',\n                    flexDirection: 'row',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    zIndex: 3,\n                }}>\n                    <div style={{\n                        fontFamily: \"'Concert One', cursive\",\n                        fontSize: 16,\n                    }}>\n                        { this.props.username }\n                    </div>\n                    <img style={{ width: 40, height: 40, margin: '0 0 0 8px' }} src={ this.profile_pic() } />\n                </div>\n                { this.state.view &&\n                    <div style={{\n                        position: 'absolute',\n                        backgroundColor: '#555',\n                        minWidth: 150,\n                        right: 0,\n                    }}>\n                        <div className=\"menu\" onMouseDown={this.logout}>\n                            <div style={{ fontFamily: \"'Concert One', cursive\" }}>Log out</div>\n                        </div>\n                    </div>\n                }\n            </div>\n        );\n    }\n}\n\nclass Tip extends React.Component {\n    render() {\n        const fontFamily = \"'Concert One', cursive\";\n        return (<div style={{\n            position: 'absolute',\n            width: '100%',\n            height: 30,\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            overflow: 'hidden',\n        }}>\n            <div className=\"statetip\" style={{\n                fontFamily,\n                marginTop: this.props.showTip ? 0 : -100,\n                opacity: this.props.showTip ? .9 : 0,\n            }}>\n                {this.props.tip}\n            </div>\n        </div>);\n    }\n}"]}