{"version":3,"sources":["../../../../../../dobuki.net/public/webgl/animation2/lib/FileSaver.js"],"names":["saveAs","view","navigator","test","userAgent","doc","document","get_URL","URL","webkitURL","save_link","createElementNS","can_use_save_link","click","node","event","MouseEvent","dispatchEvent","is_safari","HTMLElement","safari","is_chrome_ios","throw_outside","ex","setImmediate","setTimeout","force_saveable_type","arbitrary_revoke_timeout","revoke","file","revoker","revokeObjectURL","remove","dispatch","filesaver","event_types","concat","i","length","listener","call","auto_bom","blob","type","Blob","String","fromCharCode","FileSaver","name","no_auto_bom","force","object_url","dispatch_all","split","fs_error","FileReader","reader","onloadend","url","result","replace","popup","open","location","href","undefined","readyState","DONE","readAsDataURL","INIT","createObjectURL","opened","download","FS_proto","prototype","msSaveOrOpenBlob","abort","WRITING","error","onwritestart","onprogress","onwrite","onabort","onerror","onwriteend","self","window"],"mappings":"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","file":"FileSaver.js","sourcesContent":["/* FileSaver.js\n * A saveAs() FileSaver implementation.\n * 1.3.5\n * 2018-01-22 15:49:54\n *\n * By Eli Grey, https://eligrey.com\n * License: MIT\n *   See https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md\n */\n\n/*global self */\n/*jslint bitwise: true, indent: 4, laxbreak: true, laxcomma: true, smarttabs: true, plusplus: true */\n\n/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/src/FileSaver.js */\n\nvar saveAs = saveAs || (function(view) {\n\t\"use strict\";\n\t// IE <10 is explicitly unsupported\n\tif (typeof view === \"undefined\" || typeof navigator !== \"undefined\" && /MSIE [1-9]\\./.test(navigator.userAgent)) {\n\t\treturn;\n\t}\n\tvar\n\t\t  doc = view.document\n\t\t  // only get URL when necessary in case Blob.js hasn't overridden it yet\n\t\t, get_URL = function() {\n\t\t\treturn view.URL || view.webkitURL || view;\n\t\t}\n\t\t, save_link = doc.createElementNS(\"http://www.w3.org/1999/xhtml\", \"a\")\n\t\t, can_use_save_link = \"download\" in save_link\n\t\t, click = function(node) {\n\t\t\tvar event = new MouseEvent(\"click\");\n\t\t\tnode.dispatchEvent(event);\n\t\t}\n\t\t, is_safari = /constructor/i.test(view.HTMLElement) || view.safari\n\t\t, is_chrome_ios =/CriOS\\/[\\d]+/.test(navigator.userAgent)\n\t\t, throw_outside = function(ex) {\n\t\t\t(view.setImmediate || view.setTimeout)(function() {\n\t\t\t\tthrow ex;\n\t\t\t}, 0);\n\t\t}\n\t\t, force_saveable_type = \"application/octet-stream\"\n\t\t// the Blob API is fundamentally broken as there is no \"downloadfinished\" event to subscribe to\n\t\t, arbitrary_revoke_timeout = 1000 * 40 // in ms\n\t\t, revoke = function(file) {\n\t\t\tvar revoker = function() {\n\t\t\t\tif (typeof file === \"string\") { // file is an object URL\n\t\t\t\t\tget_URL().revokeObjectURL(file);\n\t\t\t\t} else { // file is a File\n\t\t\t\t\tfile.remove();\n\t\t\t\t}\n\t\t\t};\n\t\t\tsetTimeout(revoker, arbitrary_revoke_timeout);\n\t\t}\n\t\t, dispatch = function(filesaver, event_types, event) {\n\t\t\tevent_types = [].concat(event_types);\n\t\t\tvar i = event_types.length;\n\t\t\twhile (i--) {\n\t\t\t\tvar listener = filesaver[\"on\" + event_types[i]];\n\t\t\t\tif (typeof listener === \"function\") {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlistener.call(filesaver, event || filesaver);\n\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\tthrow_outside(ex);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t, auto_bom = function(blob) {\n\t\t\t// prepend BOM for UTF-8 XML and text/* types (including HTML)\n\t\t\t// note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\n\t\t\tif (/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\n\t\t\t\treturn new Blob([String.fromCharCode(0xFEFF), blob], {type: blob.type});\n\t\t\t}\n\t\t\treturn blob;\n\t\t}\n\t\t, FileSaver = function(blob, name, no_auto_bom) {\n\t\t\tif (!no_auto_bom) {\n\t\t\t\tblob = auto_bom(blob);\n\t\t\t}\n\t\t\t// First try a.download, then web filesystem, then object URLs\n\t\t\tvar\n\t\t\t\t  filesaver = this\n\t\t\t\t, type = blob.type\n\t\t\t\t, force = type === force_saveable_type\n\t\t\t\t, object_url\n\t\t\t\t, dispatch_all = function() {\n\t\t\t\t\tdispatch(filesaver, \"writestart progress write writeend\".split(\" \"));\n\t\t\t\t}\n\t\t\t\t// on any filesys errors revert to saving with object URLs\n\t\t\t\t, fs_error = function() {\n\t\t\t\t\tif ((is_chrome_ios || (force && is_safari)) && view.FileReader) {\n\t\t\t\t\t\t// Safari doesn't allow downloading of blob urls\n\t\t\t\t\t\tvar reader = new FileReader();\n\t\t\t\t\t\treader.onloadend = function() {\n\t\t\t\t\t\t\tvar url = is_chrome_ios ? reader.result : reader.result.replace(/^data:[^;]*;/, 'data:attachment/file;');\n\t\t\t\t\t\t\tvar popup = view.open(url, '_blank');\n\t\t\t\t\t\t\tif(!popup) view.location.href = url;\n\t\t\t\t\t\t\turl=undefined; // release reference before dispatching\n\t\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\t\t\tdispatch_all();\n\t\t\t\t\t\t};\n\t\t\t\t\t\treader.readAsDataURL(blob);\n\t\t\t\t\t\tfilesaver.readyState = filesaver.INIT;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t// don't create more object URLs than needed\n\t\t\t\t\tif (!object_url) {\n\t\t\t\t\t\tobject_url = get_URL().createObjectURL(blob);\n\t\t\t\t\t}\n\t\t\t\t\tif (force) {\n\t\t\t\t\t\tview.location.href = object_url;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar opened = view.open(object_url, \"_blank\");\n\t\t\t\t\t\tif (!opened) {\n\t\t\t\t\t\t\t// Apple does not allow window.open, see https://developer.apple.com/library/safari/documentation/Tools/Conceptual/SafariExtensionGuide/WorkingwithWindowsandTabs/WorkingwithWindowsandTabs.html\n\t\t\t\t\t\t\tview.location.href = object_url;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\tdispatch_all();\n\t\t\t\t\trevoke(object_url);\n\t\t\t\t}\n\t\t\t;\n\t\t\tfilesaver.readyState = filesaver.INIT;\n\n\t\t\tif (can_use_save_link) {\n\t\t\t\tobject_url = get_URL().createObjectURL(blob);\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tsave_link.href = object_url;\n\t\t\t\t\tsave_link.download = name;\n\t\t\t\t\tclick(save_link);\n\t\t\t\t\tdispatch_all();\n\t\t\t\t\trevoke(object_url);\n\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfs_error();\n\t\t}\n\t\t, FS_proto = FileSaver.prototype\n\t\t, saveAs = function(blob, name, no_auto_bom) {\n\t\t\treturn new FileSaver(blob, name || blob.name || \"download\", no_auto_bom);\n\t\t}\n\t;\n\t// IE 10+ (native saveAs)\n\tif (typeof navigator !== \"undefined\" && navigator.msSaveOrOpenBlob) {\n\t\treturn function(blob, name, no_auto_bom) {\n\t\t\tname = name || blob.name || \"download\";\n\n\t\t\tif (!no_auto_bom) {\n\t\t\t\tblob = auto_bom(blob);\n\t\t\t}\n\t\t\treturn navigator.msSaveOrOpenBlob(blob, name);\n\t\t};\n\t}\n\n\tFS_proto.abort = function(){};\n\tFS_proto.readyState = FS_proto.INIT = 0;\n\tFS_proto.WRITING = 1;\n\tFS_proto.DONE = 2;\n\n\tFS_proto.error =\n\tFS_proto.onwritestart =\n\tFS_proto.onprogress =\n\tFS_proto.onwrite =\n\tFS_proto.onabort =\n\tFS_proto.onerror =\n\tFS_proto.onwriteend =\n\t\tnull;\n\n\treturn saveAs;\n}(\n\t   typeof self !== \"undefined\" && self\n\t|| typeof window !== \"undefined\" && window\n\t|| this\n));\n"]}